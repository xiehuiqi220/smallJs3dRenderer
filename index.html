<!DOCTYPE html>
<html>

<head>
  <title>Parcel Sandbox</title>
  <meta charset="UTF-8" />
  <style>
    body {
      margin:0;
    }
    form {
      position: absolute;
      width:245px;
      right: 0;
      box-sizing: border-box;
      top: 200px;
      color: white;
      border: 1px solid white;
      margin-right: 15px;
      padding: 5px;
    }
  </style>
  <script src="src/loader/obj.js"></script>
</head>

<body>
  <canvas id="myCanvas" width="400" height="400"> </canvas>
  <form enctype="multipart/form-data">
    <label for="upload">upload a obj file</label><br />
    <input id="upload" type="file" accept=".obj" name="files">
  </form>
  <script>
    function handleFileSelect(evt) {
      let files = evt.target.files;
      let f = files[0];
      if(!f)return;
      let reader = new FileReader();
      reader.onload = (function (theFile) {
        return function (e) {
          const txt = e.target.result;

          const scene = ObjParser(txt);
          console.log("after",scene);
          window.dispatchEvent(new CustomEvent('changeScene', { detail: scene }));
        };
      })(f);
      reader.readAsText(f);
    }

    document.getElementById('upload').addEventListener('change', handleFileSelect, false);
  </script>
  <script src="src/index.js"></script>
</body>

</html>